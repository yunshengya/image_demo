import{d as p,l as y,g as s,n as w,x as b,o as l,c,u as I,y as M,F as x,s as C,v as k,b as f}from"./index-af14ff11.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";const L={class:"box"},$=["src","alt"],z=p({__name:"video",setup(B){const d=y(),v=s([]),i=s(""),m=()=>{for(let e=0;e<10;e++){const t=200+Math.floor(Math.random()*100),n=200+Math.floor(Math.random()*100);console.log(i.value);const r={src:`${i.value}?width=${t}&height=${n}`,width:t,height:n};v.value.push(r)}},o=s(null);let _=s(!0),a=null;const h=s(3),u=()=>{var t;const e=((t=document.querySelector(".box"))==null?void 0:t.clientWidth)||window.innerWidth;h.value=Math.floor(e/300)},g=()=>{o.value&&(a=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&m()})},{threshold:1}),a.observe(o.value))};return w(async()=>{await d.isReady();let e=JSON.parse(d.currentRoute.value.query.app);i.value=e.getImage,_.value=!1,m(),g(),u(),window.addEventListener("resize",u)}),b(()=>{a&&o.value&&a.unobserve(o.value),window.removeEventListener("resize",u)}),(e,t)=>(l(),c("div",L,[I(_)?k("",!0):(l(),c("div",{key:0,class:"masonry",style:M({columnCount:h.value})},[(l(!0),c(x,null,C(v.value,(n,r)=>(l(),c("div",{key:r,class:"masonry-item"},[f("img",{src:n.src,alt:`Image ${r}`},null,8,$)]))),128))],4)),f("div",{ref_key:"loading",ref:o,class:"loading"},"加载中...",512)]))}});const R=E(z,[["__scopeId","data-v-43ee68a8"]]);export{R as default};
